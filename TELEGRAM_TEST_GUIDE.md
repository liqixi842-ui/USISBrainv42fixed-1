# Telegram测试指南 - USIS Brain v3

## 🎯 6大功能测试方案

---

## 1️⃣ **智能决策测试**

### 测试1.1：简单查询（期望L1层）
```
📱 发送：预览下宏观数据
```
**期望结果**：
- ✅ 快速响应（<3秒）
- ✅ 纯文字回复，无图表
- ✅ 内容简洁

### 测试1.2：标准分析（期望L2层）
```
📱 发送：CPI怎么样？
```
**期望结果**：
- ✅ 先收到CPI图表📊
- ✅ 然后收到文字分析💬
- ✅ 响应时间5-10秒

### 测试1.3：复杂推理（期望L3层）
```
📱 发送：给我深度分析特斯拉和英伟达的竞争关系
```
**期望结果**：
- ✅ 响应时间较长（10-15秒）
- ✅ 内容深度更高
- ✅ 多维度分析

---

## 2️⃣ **自然语言识别测试**

### 测试2.1：关键词识别（简单）
```
📱 发送：盘前NVDA
```
**期望结果**：
- ✅ 识别为"盘前"模式
- ✅ 提取股票代码"NVDA"
- ✅ 返回英伟达盘前分析

### 测试2.2：同义词识别
```
📱 发送：开盘前特斯拉怎么样
```
**期望结果**：
- ✅ 能识别"开盘前"="盘前"
- ⚠️ 可能识别不到"特斯拉"（中文名）
- 建议同时测试：开盘前TSLA

### 测试2.3：复杂语义
```
📱 发送：苹果有没有被做空的风险
```
**期望结果**：
- ⚠️ 可能识别为"诊断"模式
- ⚠️ 可能无法理解"做空风险"复杂语义

### 测试2.4：多语言
```
📱 发送（英文）：What's the latest on AAPL?
📱 发送（西班牙语）：¿Qué hay de TSLA?
```
**期望结果**：
- ✅ 识别语言
- ✅ 返回对应语言分析

---

## 3️⃣ **学习写作风格测试**

### 测试3.1：查看当前风格
```
📱 发送：NVDA分析
```
**观察**：记录回复的语气和风格

### 测试3.2：设置风格（如果支持）
> ⚠️ 注意：当前系统需要手动在数据库中设置偏好，Telegram无法直接设置

**如果要手动测试**，需要：
1. 在数据库中设置 `preferred_tone='casual'`
2. 再次发送"NVDA分析"
3. 对比语气变化

**临时跳过此测试** - 需要后端支持设置命令

---

## 4️⃣ **各国新闻/热点测试**

### 测试4.1：美股热力图
```
📱 发送：美股热力图
或
📱 发送：纳斯达克热力图
```
**期望结果**：
- ✅ 返回TradingView热力图截图
- ✅ 显示美股各板块涨跌

### 测试4.2：欧洲市场
```
📱 发送：西班牙IBEX35热力图
```
**期望结果**：
- ✅ 返回西班牙股市热力图

### 测试4.3：新闻抓取
```
📱 发送：深度新闻
或
📱 发送：最新资讯
```
**期望结果**：
- ⚠️ Brain检测到需求
- ⚠️ N8N执行RSS抓取（如果配置了）
- ⚠️ 返回新闻列表

**注意**：此功能依赖N8N的RSS节点，可能未配置

---

## 5️⃣ **股票解析测试**

### 测试5.1：单股票查询
```
📱 发送：AAPL
或
📱 发送：苹果行情
```
**期望结果**：
- ✅ 当前价格、涨跌幅
- ✅ 公司新闻（最近3天）
- ✅ 市场情绪分析
- ✅ 可能包含图表

### 测试5.2：多股票对比
```
📱 发送：NVDA和AMD对比
```
**期望结果**：
- ✅ 两只股票的数据
- ✅ 对比分析

### 测试5.3：个股K线图
```
📱 发送：TSLA图表
或
📱 发送：特斯拉K线走势
```
**期望结果**：
- ✅ 返回TradingView K线截图
- ✅ 技术面分析

---

## 6️⃣ **新闻图片点评测试**

### 测试6.1：文字新闻
```
📱 发送：NVDA新闻
```
**期望结果**：
- ✅ 返回文字新闻列表
- ❌ **无新闻配图**（此功能未实现）

### 测试6.2：图表生成
```
📱 发送：失业率走势
```
**期望结果**：
- ✅ 返回失业率图表（QuickChart生成）
- ✅ 文字分析

---

## 📋 完整测试清单（复制粘贴发送）

### 快速测试序列（5分钟）
```
1. 预览下宏观数据
2. CPI怎么样？
3. 盘前NVDA
4. 美股热力图
5. AAPL
```

### 完整测试序列（15分钟）
```
1. 预览下宏观数据
2. CPI怎么样？
3. 失业率上升了吗？
4. 盘前NVDA
5. 开盘前TSLA
6. AAPL行情
7. NVDA和AMD对比
8. 美股热力图
9. 西班牙IBEX35热力图
10. TSLA图表
11. 深度新闻
12. 给我深度分析特斯拉和英伟达的竞争关系
```

---

## 🔍 如何判断测试结果

### ✅ 成功标准

1. **响应速度**：
   - 简单查询：<5秒
   - 图表生成：<15秒
   - 复杂分析：<20秒

2. **内容质量**：
   - 数据准确（价格、涨跌幅等）
   - 逻辑清晰
   - 无明显错误

3. **图表展示**：
   - 图片清晰可见
   - 图表与请求匹配
   - 有配套文字说明

### ⚠️ 注意事项

1. **首次启动**：第一次请求可能较慢（API初始化）
2. **API限制**：频繁测试可能触发API限制
3. **N8N依赖**：某些功能需要N8N工作流正常运行

---

## 🐛 常见问题排查

### 问题1：无响应
**可能原因**：
- Brain服务器未启动
- N8N工作流未激活
- Telegram Bot token失效

**解决**：
1. 检查Replit控制台是否有错误
2. 检查N8N是否运行
3. 发送 `/start` 重新激活Bot

### 问题2：返回"错误"
**可能原因**：
- API Key缺失或失效
- 请求格式不支持

**解决**：
- 查看Brain日志找错误信息
- 简化测试消息

### 问题3：无图表
**可能原因**：
- N8N图表发送节点未配置
- QuickChart URL生成失败

**解决**：
- 检查N8N的 `Emit_Chart_Actions` 和 `Send_Chart_Photo` 节点
- 查看Brain日志中的图表生成记录

---

## 📊 测试记录表（建议填写）

| 测试项 | 发送消息 | 是否响应 | 响应时间 | 内容质量 | 备注 |
|--------|----------|----------|----------|----------|------|
| 简单查询 | 预览下宏观数据 | ⬜ | ___秒 | ⬜好 ⬜一般 ⬜差 |  |
| 图表生成 | CPI怎么样？ | ⬜ | ___秒 | ⬜好 ⬜一般 ⬜差 |  |
| 股票分析 | AAPL | ⬜ | ___秒 | ⬜好 ⬜一般 ⬜差 |  |
| 热力图 | 美股热力图 | ⬜ | ___秒 | ⬜好 ⬜一般 ⬜差 |  |
| K线图 | TSLA图表 | ⬜ | ___秒 | ⬜好 ⬜一般 ⬜差 |  |

---

**开始测试吧！🚀 把结果告诉我，我会帮你分析哪些功能正常，哪些需要修复。**
