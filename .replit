modules = ["nodejs-20", "postgresql-16"]

[nix]
channel = "stable-25_05"
packages = [
  "glib",
  "nss",
  "nspr",
  "dbus",
  "atk",
  "at-spi2-atk",
  "xorg.libX11",
  "xorg.libXcomposite",
  "xorg.libXdamage",
  "xorg.libXext",
  "xorg.libXfixes",
  "xorg.libXrandr",
  "xorg.libXxcb",
  "libxkbcommon",
  "alsa-lib",
  "mesa",
  "cups",
  "try",
]

[deployment]
deploymentTarget = "gce"
run = ["sh", "-c", "npm start"]
build = ["sh", "-c", "npm install"]

[[ports]]
localPort = 3000
externalPort = 80
