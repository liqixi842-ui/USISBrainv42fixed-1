我要把 n8n 的“新闻采集 → Ingest”彻底打通，请按这份剧本执行并逐步贴出结果：

【A. 读取当前发布信息 & 健康检查】
1) 读取当前“Published App”的 Primary URL（完整域名，形如 https://xxxx.replit.app）。
2) 用 curl 访问这个 Primary URL 的 /health，贴出状态码与响应前 200 字。如果不是 200，请执行一次 Unpublish→Republish，再测一次。

【B. 取出服务端密钥】
3) 读取 Replit Secrets 里的 NEWS_INGESTION_SECRET（只在本回合临时使用，不打印到日志）。记住这个值为 secretValue。

【C. 修改 n8n 工作流（用 REST API）】
4) 用 N8N_BASE_URL + N8N_API_KEY：
   - 找到工作流 “USIS News RSS Collector v4.0” （ID 你之前找到的是 ddvIQQUO4YfR1rAx）。
   - 定位名称包含 “Ingest” 的 HTTP Request 节点（type=n8n-nodes-base.httpRequest，V4.x）。
   - 将该节点：
     a) URL 改为：<PrimaryURL>/api/news/ingest  （例如：https://xxxx.replit.app/api/news/ingest）
     b) Headers 改为两条：
        - X-News-Secret: 直接写入 **明文** secretValue（注意：这条不要用表达式，value 是纯字符串）
        - Content-Type: application/json
     c) Body 改为 JSON 映射（V4 语法保留 ={{ ... }} 没问题）：
        title: ={{ $json.title }}
        url: ={{ $json.link }}
        source: ={{ $json.source || "WSJ" }}
        isoDate: ={{ $json.isoDate }}
        content: ={{ $json.content || $json["content:encoded"] || $json.contentSnippet }}
        tier: ={{ $json.tier }}
        domain: ={{ $json.domain }}
        paid: ={{ Array.isArray($json.categories) && $json.categories.includes("_PAID") }}
        dryRun: true
   - 保存工作流并回显节点的“最终参数片段”（只展示 URL、headers、jsonBody 这三块，隐藏 secret 的具体值，用 *** 代替）。

【D. 立刻做一次 dryRun】
5) 通过 n8n 执行一次单条输入（或用你刚才的 WSJ 样例）触发该 HTTP 节点，贴出：
   - 请求目标 URL
   - 展开的 Headers（X-News-Secret 用 *** 遮蔽）
   - 展开的 JSON Body
   - 服务器返回的状态码与响应体前 200 字（如果 JSON 内有 { ok, dryRun } 字段请一并显示）

【E. 服务器端对齐（若返回 401/403/404）】
6) 如果状态码不是 200：
   - 在我的服务 index.js 里为 /api/news/ingest 增加更详细的日志（仅打印校验结果，不打印明文 secret）：
     · 收到请求时间、来源 IP、是否命中校验（match=true/false）、dryRun 值
     · 若校验失败，返回 { ok:false, code:'BAD_SECRET' }，状态码 401
     · 若路由不存在，返回 { ok:false, code:'NOT_FOUND' }，状态码 404
   - 重启后再次用第 5 步的 dryRun 打一次，并回显日志关键行（match 标志、状态码）
   - 若依然 404，请打印我的路由注册清单里是否存在 app.post('/api/news/ingest', ...)

【F. 成功后切换为正式写入】
7) 一旦 dryRun=200 成功：
   - 把 HTTP 节点的 “dryRun: true” 改成 “= {{ false }}”（或直接 false）
   - 保存工作流
   - 再执行一次，记录服务器返回 { ok:true } 且 n8n 执行状态 success

【G. 最终汇总（请用清单）】
8) 输出清单：
   - Primary URL：<…>/health 状态码
   - Ingest URL：<…>/api/news/ingest
   - Header 渲染：OK（X-News-Secret=***）
   - dryRun：200 / 正式写入：200
   - 服务器日志校验：match=true
   - n8n 执行状态：success
