ğŸ”¥ğŸ”¥ğŸ”¥ã€å‘ç»™ Replit â€”â€” USIS Research Engine v4.0ï¼ˆTaste + Truth ä¸“ä¸šçŸ«æ­£å±‚ï¼‰ã€‘ğŸ”¥ğŸ”¥ğŸ”¥
USIS v4.0 â€“ Taste + Truth Professional Correction Layer
DO NOT modify the template or layout.
DO NOT modify the v3.2 multi-model engine.
ONLY add the new professional correction layer described below.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0) CORE GOAL (MANDATORY)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Add a new post-processing layer that takes the raw v3.2 multi-model text
(summary, thesis, valuation, segments, macro, catalysts, risks, technical, action)
and transforms it into **professional sell-side research language** with:

âœ” Accurate tone  
âœ” No hallucinations  
âœ” No invented events  
âœ” No invented numbers  
âœ” No outdated time references  
âœ” No duplicated paragraphs  
âœ” No overly optimistic AI-like phrasing  
âœ” No â€œtemplate feelingâ€  
âœ” Always consistent with real data in the report object  

This is the USIS â€œTaste + Truth Layerâ€.

This layer must run AFTER multi-model consolidation,
just before HTML/PDF generation.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1) CREATE NEW FUNCTION: refineNarrativeText()
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Add a new function in reportService.js:

```js
async function refineNarrativeText(report) {
  // returns cleaned, filtered, institutionally-corrected text sections
}


This function MUST:

Accept the full report object (with v3.2 consolidated text).

Apply all corrections described below.

Return a new object:
{
summary_text,
thesis_text,
valuation_text,
segment_text,
macro_text,
catalysts_text,
risks_text,
tech_view_text,
action_text
}

Replace the existing text fields in the report with these corrected values.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2) TASTE CORRECTION (INSTITUTIONAL TONE)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Inside refineNarrativeText(), implement the following transformations:

2.1 Replace AI-generic words with institutional equivalents:

"strong", "rapidly", "dominant", "huge", "massive"
â†’ "solid", "material", "leading position", "meaningful", "significant"

2.2 Replace absolute phrases with professional qualifiers:

"will", "guaranteed", "certain", "huge growth"
â†’ "we expect", "we believe", "could", "may", "subject to", "based on mgmt commentary"

2.3 Ensure every paragraph contains:

a data point OR

a driver OR

a condition OR

a comparison

AI filler text with none of the above must be removed.

2.4 Remove redundant statements and merge duplicate paragraphs.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
3) TRUTH CORRECTION (HARD RULES)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Implement a full truth-checker:

3.1 Delete any mention of:

â€œARM acquisitionâ€

â€œMetaverse partnershipâ€

â€œQ1/Q2/Q3/Q4 2024 upcoming eventsâ€

Fabricated product launches or revenue impacts

Any numbers not present in report.price, report.valuation, report.fundamentals, report.targets, report.peers
If a number appears in text but not in the report object â†’ DELETE that sentence.

3.2 Delete absolute future statements with specific dates unless they exist in real data.
Replace with: â€œOver the next several quartersâ€¦â€

3.3 Delete invented monetary impacts:

"1B revenue"

"500M growth"

Any dollar figure not in report data

3.4 Delete invented percentage claims:

"grow 20%"

"increase 30%"
Unless derived from real report.fundamentals or price/valuation deltas.

3.5 Delete invented product names not in NVDA's known ecosystem unless mentioned in the report data.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
4) DUPLICATION REMOVAL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Add a deduplication pass:

If two paragraphs share > 60% similarity â†’ keep the better one.

Remove all repeated valuation descriptions.

Remove repeated mentions of Forward PE/TTM PE when not adding new information.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
5) STRUCTURAL CORRECTION RULES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

5.1 SUMMARY:

Must be 3â€“5 bullet points.

Each bullet must contain one data reference (PE, EPS, margin, price, target) OR one condition (macro/industry).

Remove all â€œKey Risksâ€ and â€œKey Messagesâ€ duplication from page 2.

5.2 THESIS:

Must be 3 structured paragraphs:
(1) Industry & positioning
(2) Financial quality
(3) Long-term drivers & differentiation

Each paragraph must cite at least one real number from report.

5.3 VALUATION:

Must reference:

PE TTM

Forward PE

Historical median (if available)

Base/Bull/Bear targets

DO NOT repeat the same sentence in other sections.

5.4 SEGMENTS:

If segment data missing â†’ use neutral language:
â€œNVDA does not disclose segment-level revenue; we base our analysis on publicly known business lines: Data Center, Gaming, Professional Visualization, Automotive.â€

Delete any invented revenue %, margins, growth numbers.

5.5 CATALYSTS / RISKS:

Must list EXACTLY 6â€“8 items each.

Each item must be 1â€“2 lines max.

Remove all invented dates or revenue impacts.

Replace with professional variants:
â€œPotential upside from new product cyclesâ€
â€œVisibility on cloud CAPEX recoveryâ€
â€œSupply chain normalizationâ€

5.6 TECHNICAL:

Must reference:

RSI range (overbought/neutral/oversold)

Support/resistance levels

Trend description

DO NOT fabricate EMA values.

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
6) IMPLEMENT THE LAYER
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Insert refineNarrativeText(report) call:

After multi-model consolidation

Before HTML/PDF rendering

Flow becomes:

buildResearchReport â†’
multiModelResearchPipeline â†’
consolidateMultiModelOutput â†’
refineNarrativeText (v4.0) â†’
buildFinalInstitutionalHtml â†’
PDF

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
7) VERIFICATION REQUIREMENTS (MANDATORY)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

After implementing v4.0:

For NVDA, AAPL, SPX:

Generate report JSON

Confirm:

NO invented events

NO invented dates

NO invented monetary impacts

NO invented percentages

NO duplicate paragraphs

NO â€œAI-sounding textâ€

All text uses professional tone

Generate PDF (Final Template v1.0)

Confirm:

Page 1â€“2 look institutionally correct

No empty-block pages

No unsupported placeholders

All content consistent with the report object

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
EXECUTE v4.0 NOW.
Do NOT modify template.
Do NOT modify multi-model.
Just add Taste + Truth Correction Layer.