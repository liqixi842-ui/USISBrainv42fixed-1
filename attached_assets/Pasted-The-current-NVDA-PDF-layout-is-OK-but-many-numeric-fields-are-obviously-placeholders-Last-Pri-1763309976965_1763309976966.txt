The current NVDA PDF layout is OK, but many numeric fields are obviously placeholders:

- Last Price, Daily Change, Intraday High/Low are N/A.
- 52-week high/low (212.19 / 86.62) look like stale or hardcoded values.
- Market Cap is N/A.
- Price targets 150 / 180 / 120 are clearly template numbers, not derived from real data.

I want to move from “template” to “real data” using the existing data broker (Finnhub / Twelve Data etc.).

Please do the following in v3-dev:

────────────────────────
1) Wire price.* fields to the existing quote data
────────────────────────

In buildResearchReport(symbol, assetType), locate where the `price` section is populated.

Today it looks like this (conceptually):

price: {
  last: null,
  change_abs: null,
  change_pct: null,
  high_1d: null,
  low_1d: null,
  high_52w: 212.19, // looks hardcoded
  low_52w: 86.62,   // looks hardcoded
  ...
}

Instead, please:

1. Use the same quote source that the “Data Broker v4.2” is already using (Finnhub/TwelveData/etc.).  
   For NVDA / other equities, you should already have a unified quote object somewhere like:

   {
     last,
     change_abs,
     change_pct,
     high_1d,
     low_1d,
     high_52w,
     low_52w,
     market_cap,
     pe_ttm,
     pe_forward,
     ps_ttm,
     pb,
     dividend_yield,
     ...
   }

2. Map the fields from that quote object directly into report.price:

   price: {
     last: quote.last ?? null,
     change_abs: quote.change_abs ?? null,
     change_pct: quote.change_pct ?? null,
     high_1d: quote.high_1d ?? null,
     low_1d: quote.low_1d ?? null,
     high_52w: quote.high_52w ?? null,
     low_52w: quote.low_52w ?? null,
     ytd_return_pct: quote.ytd_return_pct ?? null,
     currency: quote.currency ?? "USD"
   }

3. Remove any hardcoded values (e.g. 212.19 / 86.62).  
   If data is missing, set the field to null and let the HTML template render “N/A” in a consistent way.

────────────────────────
2) Wire valuation.* and fundamentals.* to real fundamentals data
────────────────────────

Similarly, stop using placeholder numbers for valuation and fundamentals.

For `valuation`:

valuation: {
  market_cap: quote.market_cap ?? null,
  pe_ttm: quote.pe_ttm ?? null,
  pe_forward: quote.pe_forward ?? null,
  ps_ttm: quote.ps_ttm ?? null,
  pb: quote.pb ?? null,
  dividend_yield: quote.dividend_yield ?? null,
  ev_ebitda: quote.ev_ebitda ?? null
}

For `fundamentals`:

fundamentals: {
  gross_margin: quote.gross_margin ?? null,
  operating_margin: quote.operating_margin ?? null,
  net_margin: quote.net_margin ?? null,
  roe: quote.roe ?? null,
  roa: quote.roa ?? null,
  fcf_margin: quote.fcf_margin ?? null
}

Use whichever existing data fields you already have in the broker; if some fields are not available, leave them as null.

The key point: **no more hardcoded valuation numbers**.

────────────────────────
3) Replace hardcoded price targets with a simple model
────────────────────────

Right now the “Price Targets” section shows fixed values:

- Base: 150 (+15%)
- Bull: 180 (+38%)
- Bear: 120 (-8%)

These are clearly placeholders.

Instead, implement a simple, data-derived model:

- Let `P = report.price.last` (if null, skip the entire targets block gracefully).
- Define:

  base.upside_pct: e.g. +15% (0.15)
  bull.upside_pct: e.g. +35% (0.35)
  bear.downside_pct: e.g. -15% (-0.15)

- Compute:

  base.price = P * (1 + base.upside_pct)
  bull.price = P * (1 + bull.upside_pct)
  bear.price = P * (1 + bear.downside_pct)

- Round to 2 decimals and store in `report.targets`.

For now I am OK with a very simple heuristic model. We will refine it later. The important thing is that the targets are *internally consistent* with the last price, instead of fixed magic numbers.

────────────────────────
4) Log the final ResearchReport JSON for NVDA so we can verify
────────────────────────

After you populate the ResearchReport object for NVDA, please log:

console.log("[DEBUG] ResearchReport NVDA:", JSON.stringify(report, null, 2));

Run one request for /v3/report/NVDA?format=json and make sure:

- price.last / change_abs / change_pct / 52w high/low are no longer N/A if the quote API returns data.
- valuation.* and fundamentals.* are populated from real data where available.
- targets.base/bull/bear are derived from last price, not magic constants.

Send me the JSON output for NVDA so we can review the numbers.

────────────────────────
5) Keep the HTML/PDF template unchanged for now
────────────────────────

Do NOT change the HTML/CSS layout in this step.  
Only fix the underlying data wiring in buildResearchReport so that the current layout displays real values instead of placeholders.

Once the JSON is correct, we will iterate on the textual content and display formatting.
