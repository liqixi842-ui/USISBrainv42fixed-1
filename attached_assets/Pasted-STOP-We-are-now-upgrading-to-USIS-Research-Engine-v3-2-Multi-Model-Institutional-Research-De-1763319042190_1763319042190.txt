STOP.  
We are now upgrading to **USIS Research Engine v3.2 — Multi-Model Institutional Research Department**.

v3.2 MUST implement FULLY AUTOMATED multi-AI collaboration.  
This is NOT optional.

────────────────────────────────────────
0) CORE GOAL (MANDATORY)
────────────────────────────────────────
The system must use **multiple AI models simultaneously**, each acting as a specialized “research analyst”.

Then a master model (GPT-5 or GPT-4o) MUST consolidate all outputs into a final institutional-grade report.

This is the structure:

★ GPT-5 / GPT-4o → Chief Analyst (final consolidation)  
★ Claude 3.5 Sonnet → Industry & Technology Deep Dive Analyst  
★ Gemini 2.0 Pro → Macro + Sector Strategy Analyst  
★ DeepSeek V3 → Financial Modeling + Valuation Analyst  
★ Perplexity / Mistral → Peer Comparison & Fact Checking Analyst  

ALL models MUST be invoked automatically, without user involvement.

────────────────────────────────────────
1) MULTI-MODEL ROUTING ENGINE (NEW)
────────────────────────────────────────

Implement a new function:
`async function multiModelResearchPipeline(reportBaseData)`

This MUST execute the following steps IN PARALLEL:

────────────────────
(1) Industry / Thesis Deep Dive  
────────────────────
Call CLAUDE:

claude_thesis = Claude_Sonnet.generate({
  symbol, name, peers, fundamentals,
  required_sections: [
    "industry_cycle",
    "competitive_position_vs_peers",
    "structural_growth_drivers",
    "profitability_quality",
    "technology_moat"
  ]
});

────────────────────
(2) Macro + Sector Outlook  
────────────────────
Call GEMINI:

gemini_macro = Gemini_Pro.generate({
  symbol, sector, beta,
  required_sections: [
    "interest_rate_environment",
    "sector_rotation",
    "macro_risks",
    "regulatory_trends",
    "key_macro_drivers"
  ]
});

────────────────────
(3) Financial Modeling + Valuation  
────────────────────
Call DEEPSEEK:

deepseek_valuation = DeepSeek.generate({
  pe_ttm, pe_forward, historical_pe, eps, eps_fwd,
  required_output: [
    "detailed_valuation_model",
    "earnings_sensitivity_table",
    "forward_eps_model",
    "bull_base_bear_explanations"
  ]
});

────────────────────
(4) Peer Comparison Intelligence  
────────────────────
Call PERPLEXITY / MISTRAL:

peer_insights = Mistral_Large.generate({
  peers, peer_metrics,
  required_sections: [
    "relative_valuation_commentary",
    "margin_comparison",
    "competitive_risk_assessment",
    "peer_strengths_weaknesses"
  ]
});

────────────────────
(5) Risk & Catalyst Expansion  
────────────────────
Call CLAUDE or GPT-4o-mini:

risk_catalyst = GPT4o_Mini.generate({
  reportBaseData,
  required_output: [
    "8_institutional_catalysts",
    "8_institutional_risks"
  ]
});

────────────────────────────────────────
2) MASTER CONSOLIDATION LAYER
────────────────────────────────────────

After all sub-models finish, call GPT-5 (or GPT-4o):

finalNarrative = GPT5.generate({
  instruction: "CONSOLIDATE ALL ANALYSIS INTO A 12-PAGE INSTITUTIONAL REPORT",
  inputs: {
    claude_thesis,
    gemini_macro,
    deepseek_valuation,
    peer_insights,
    risk_catalyst,
    raw_data: reportBaseData
  },
  rules: [
    "Use only VERIFIED data from reportBaseData",
    "No hallucinations",
    "No contradictions",
    "No generic AI wording",
    "Strong institutional tone",
    "Match Morgan Stanley / J.P. Morgan style",
    "Embed all important numbers and metrics",
    "Generate polished paragraphs for each of 12 sections"
  ]
});

────────────────────────────────────────
3) NEW JSON STRUCTURE (MANDATORY)
────────────────────────────────────────

Add these new fields:

report.multi_model = {
  claude_thesis,
  gemini_macro,
  deepseek_valuation,
  peer_insights,
  risk_catalyst,
  consolidated: finalNarrative
};

report.final_text = finalNarrative;  
(This MUST replace v3.1 single-model narrative.)

────────────────────────────────────────
4) PDF GENERATION (NO CHANGES)
────────────────────────────────────────

Use buildHtmlFromReport(report.final_text) EXACTLY as before.  
We only replace the CONTENT, not the layout.

────────────────────────────────────────
5) HARD RULES (MUST PASS)
────────────────────────────────────────

A v3.2 report is VALID ONLY IF:

1. At least **4 different AI models** were used (Claude, Gemini, DeepSeek, GPT-4o/GPT-5).
2. Consolidated text includes phrasing from ALL models.
3. Each section includes REAL DATA references.
4. No section is generic AI filler (must pass density + specificity check).
5. PDF remains full 12 pages with institutional density.

────────────────────────────────────────
6) DELIVERABLES
────────────────────────────────────────

You MUST produce:

1) /tmp/NVDA_v3.2_report.pdf  
2) /tmp/AAPL_v3.2_report.pdf  
3) /tmp/SPX_v3.2_report.pdf  
4) /tmp/*_v3.2_report.json (with multi_model object fully filled)

If any file is missing → FAIL.

────────────────────────────────────────
EXECUTE v3.2 NOW.  
DO NOT ASK QUESTIONS.  
DO NOT REQUEST CONFIRMATION.  
JUST IMPLEMENT.
────────────────────────────────────────
