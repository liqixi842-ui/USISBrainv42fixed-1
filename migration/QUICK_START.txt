â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ USIS Brain è¿ç§»å¿«é€Ÿå…¥é—¨ï¼ˆ5åˆ†é’Ÿç‰ˆï¼‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ç›®æ ‡æœåŠ¡å™¨: 150.242.90.36 (Rocky 9)
ç”Ÿäº§åŸŸå: https://myusis.net

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€æ­¥éª¤ 1ã€‘åœ¨ Replit ä¸Šå¯¼å‡ºæ•°æ®åº“
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

cd /home/runner/USIS_Brain
./migration/1_export_database.sh

è¾“å‡º: migration/database_backup/usis_brain_*.sql

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€æ­¥éª¤ 2ã€‘æ‰“åŒ…å¹¶ä¸Šä¼ åˆ°æœåŠ¡å™¨
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# åœ¨æœ¬åœ°æ‰“åŒ…
tar czf usis-brain.tar.gz \
  --exclude='node_modules' \
  --exclude='.git' \
  --exclude='attached_assets' \
  --exclude='.cache' \
  .

# ä¸Šä¼ åˆ°æœåŠ¡å™¨
scp usis-brain.tar.gz root@150.242.90.36:/tmp/

# åœ¨æœåŠ¡å™¨ä¸Šè§£å‹
ssh root@150.242.90.36
cd /tmp
tar xzf usis-brain.tar.gz
mkdir -p /opt/usis-brain
mv USIS_Brain/* /opt/usis-brain/

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€æ­¥éª¤ 3ã€‘ä¸€é”®éƒ¨ç½²ï¼ˆåœ¨æœåŠ¡å™¨ä¸Šï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

cd /opt/usis-brain
chmod +x migration/*.sh
sudo ./migration/3_deploy_to_server.sh

âš ï¸ éƒ¨ç½²è¿‡ç¨‹ä¸­ä¼šè¦æ±‚ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹å¿…éœ€å˜é‡:
   - DATABASE_URL (ä¼šè‡ªåŠ¨è®¾ç½®ä¸ºæœ¬åœ°PostgreSQL)
   - REPLIT_DEPLOYMENT_URL=https://myusis.net
   - TELEGRAM_BOT_TOKEN
   - OPENAI_API_KEY
   - FINNHUB_API_KEY
   - DOC_RAPTOR_API_KEY
   - DOC_RAPTOR_TEST_MODE=false

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€æ­¥éª¤ 4ã€‘æ¢å¤æ•°æ®åº“ï¼ˆåœ¨æœåŠ¡å™¨ä¸Šï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

cd /opt/usis-brain
sudo -u usis ./migration/2_restore_database.sh

è¾“å…¥ yes ç¡®è®¤æ¢å¤

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€æ­¥éª¤ 5ã€‘é…ç½® Nginxï¼ˆåœ¨æœåŠ¡å™¨ä¸Šï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

sudo ./migration/4_configure_nginx.sh

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€æ­¥éª¤ 6ã€‘é…ç½® HTTPSï¼ˆåœ¨æœåŠ¡å™¨ä¸Šï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âš ï¸ å‰æ: DNS å·²é…ç½®
   myusis.net Aè®°å½• â†’ 150.242.90.36

# å¼€æ”¾é˜²ç«å¢™ï¼ˆå¦‚éœ€è¦ï¼‰
sudo firewall-cmd --permanent --add-service=http
sudo firewall-cmd --permanent --add-service=https
sudo firewall-cmd --reload

# é…ç½® HTTPS
sudo ./migration/5_setup_https.sh

è¾“å…¥ yes ç¡®è®¤DNSå·²é…ç½®

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€æ­¥éª¤ 7ã€‘éªŒè¯éƒ¨ç½²ï¼ˆåœ¨æœåŠ¡å™¨ä¸Šï¼‰
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

./migration/6_verify_deployment.sh

âœ… å¦‚æœæ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼Œè¿ç§»å®Œæˆï¼

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€æµ‹è¯•è®¿é—®ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# å¥åº·æ£€æŸ¥
curl https://myusis.net/health

# v3ç ”æŠ¥æµ‹è¯•
curl https://myusis.net/v3/report/test

# JSONç ”æŠ¥
curl https://myusis.net/v3/report/AAPL?format=json

# HTMLç ”æŠ¥
curl https://myusis.net/v3/report/AAPL?format=html

# PDFç ”æŠ¥ï¼ˆä¸‹è½½ï¼‰
curl https://myusis.net/v3/report/NVDA?format=pdf -o test.pdf

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€å¸¸ç”¨ç®¡ç†å‘½ä»¤ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# æŸ¥çœ‹åº”ç”¨çŠ¶æ€
sudo -u usis pm2 status

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
sudo -u usis pm2 logs usis-brain

# é‡å¯åº”ç”¨
sudo -u usis pm2 restart usis-brain

# åœæ­¢åº”ç”¨
sudo -u usis pm2 stop usis-brain

# å¯åŠ¨åº”ç”¨
sudo -u usis pm2 start usis-brain

# æŸ¥çœ‹Nginxæ—¥å¿—
tail -f /var/log/nginx/usis-brain-access.log
tail -f /var/log/nginx/usis-brain-error.log

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ã€è¿ç§»åé…ç½®ã€‘
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. æ›´æ–° Telegram Bot Webhookï¼ˆå¦‚ä½¿ç”¨ï¼‰:
   curl https://api.telegram.org/bot<TOKEN>/setWebhook?url=https://myusis.net/webhook/<TOKEN>

2. æ›´æ–° N8N å·¥ä½œæµ:
   å°†æ‰€æœ‰ liqixi888.replit.app æ›¿æ¢ä¸º myusis.net

3. Replit è§’è‰²å˜æ›´:
   - ä¿ç•™åŸŸå: liqixi888.replit.app
   - ç”¨é€”: ä»…ä½œå¼€å‘/æµ‹è¯•ç¯å¢ƒ
   - ä¸å†ç”¨äºç”Ÿäº§æµé‡

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

è¯¦ç»†æ–‡æ¡£: migration/README.md

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
